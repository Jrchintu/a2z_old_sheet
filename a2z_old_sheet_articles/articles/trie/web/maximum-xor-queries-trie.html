<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Maximum Xor Queries | Trie</title>
<style>
        /* Define CSS Variables for colors and spacing for better maintenance */
        :root {
            /* Color Palette (UI/UX Unchanged) */
            --color-text-primary: #333;
            --color-text-secondary: #2c3e50;
            --color-link-primary: #3498db;
            --color-link-hover: #2980b9;
            --color-bg-body: #fdfdfd;
            --color-bg-container: #fff;
            --color-bg-light: #f9f9f9;
            --color-bg-lighter-hover: #f1f1f1; /* Used for summary hover */
            --color-border-light: #e7e7e7;
            --color-border-header: #ecf0f1;

            /* Code Block Colors */
            --color-code-bg: #2d2d2d;
            --color-code-text: #f8f8f2;

            /* Standardized Spacing */
            --spacing-xs: 5px;
            --spacing-sm: 10px;
            --spacing-md: 15px;
            --spacing-lg: 20px;
        }

        /* ---------------------------------- */
        /* 1. Base Structure & Global Styles */
        /* ---------------------------------- */

        /* A clean, modern, and responsive base style for the articles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            line-height: 1.6;
            color: var(--color-text-primary);
            background-color: var(--color-bg-body);
            margin: 0;
            padding: 0;
        }

        /* Main container for the article content */
        .container {
            margin: var(--spacing-xs); /* 5px */
            padding: var(--spacing-sm); /* 10px */
            background-color: var(--color-bg-container);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* ---------------------------------- */
        /* 2. Typography & Links */
        /* ---------------------------------- */

        /* Main article title */
        h1 {
            color: var(--color-text-secondary);
            font-size: 2.5em;
            margin-bottom: 0.5em;
            border-bottom: 2px solid var(--color-border-header);
            padding-bottom: 0.5em;
            text-align: center;
        }

        /* Improve styling for links */
        a {
            color: var(--color-link-primary);
            text-decoration: none;
            transition: color 0.2s ease-in-out;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        /* ---------------------------------- */
        /* 3. Media Elements (Images & Video) */
        /* ---------------------------------- */

        /* Make images responsive and centered */
        img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            display: block;
            margin: 1em auto;
        }

        /* Center figures which often wrap images */
        figure {
            text-align: center;
            margin: 1.5em 0;
        }

        /* Center and style YouTube video wrapper for responsiveness (16:9) */
        .yt-video-wrapper {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding-top: 56.25%;
            margin: 1.5em auto;
            border-radius: 8px;
        }

        .yt-video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Adjustments for video inside a details block */
        .dsa_article_youtube_video .yt-video-wrapper {
            padding-top: 56.25%;
            margin: 0;
            border-radius: 0;
            padding-left: 0;
            padding-right: 0;
        }

        /* ---------------------------------- */
        /* 4. Code Blocks */
        /* ---------------------------------- */

        /* Basic code block styling */
        pre {
            background-color: var(--color-code-bg);
            color: var(--color-code-text);
            padding: var(--spacing-sm); /* 10px */
            margin: 0px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: "Fira Code", "Consolas", "Monaco", monospace;
            font-size: 0.9em;
        }

        code {
            font-family: "Fira Code", "Consolas", "Monaco", monospace;
        }

        /* Ensure the highlighted code block fills the <pre> area */
        pre code.hljs {
            display: block;
            background: none;
            padding: 0;
            margin: 0;
        }

        /* ---------------------------------- */
        /* 5. Code Section Tabs Styling */
        /* ---------------------------------- */

        .code-tabs {
            display: flex;
            border-bottom: 1px solid var(--color-border-light);
            margin-bottom: 1em;
            align-items: center;
        }

        .code-tab {
            padding: 10px 15px;
            cursor: pointer;
            background-color: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1em;
            color: #555;
            transition: all 0.2s ease-in-out;
        }

        .code-tab:hover {
            background-color: var(--color-bg-light);
            color: var(--color-text-primary);
        }

        .code-tab.dsa_article_code_active {
            color: var(--color-text-secondary);
            border-bottom: 3px solid var(--color-link-primary);
        }

        .copy-btn {
            margin-left: auto;
            cursor: pointer;
            padding: var(--spacing-sm); /* 10px */
        }

        .copy-btn path {
            fill: #aaa;
            transition: fill 0.2s;
        }

        .copy-btn:hover path {
            fill: var(--color-text-primary);
        }

        .copy-btn.dsa_article_code_active path {
            fill: var(--color-link-primary);
        }

        .code-block {
            display: none;
        }

        .code-block.dsa_article_code_active {
            display: block;
        }

        /* ---------------------------------- */
        /* 6. Accordion/Dropdown Styling */
        /* ---------------------------------- */

        details {
            margin-bottom: 1em;
            border: 1px solid var(--color-border-light);
            border-radius: 6px;
            overflow: hidden;
            padding: 0;
        }

        summary {
            list-style: none;
            cursor: pointer;
            padding: var(--spacing-md) var(--spacing-lg); /* 15px 20px */
            background-color: var(--color-bg-light);
            font-weight: 500;
            color: var(--color-text-secondary);
            transition: background-color 0.2s ease-in-out;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary:hover {
            background-color: var(--color-bg-lighter-hover);
        }

        /* Content inside the dropdowns */
        .common-drops,
        .atricle_example_content {
            padding: 10px 10px 0;
            border-bottom: 10px; /* Kept original value */
            background-color: var(--color-bg-container);
            border-top: 1px solid var(--color-border-light);
        }

        /* Full padding for example */
        .atricle_example_content {
            padding: var(--spacing-sm); /* 10px */
        }

        /* Additional padding for details content that doesn't have specific classes */
        details> :not(summary) {
            padding-left: 10px;
            padding-right: 10px;
        }

        /* Nested dropdown summaries */
        .secondary-summary {
            background-color: #fafafa;
            padding: 12px 20px;
            font-weight: normal;
        }

        .secondary-summary:hover {
            background-color: var(--color-bg-lighter-hover);
        }

        /* ---------------------------------- */
        /* 7. Practice and Disclaimer */
        /* ---------------------------------- */

        .practice,
        .new-disclaimer {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
        }

        .new-disclaimer {
            justify-content: center;
        }

        /* ---------------------------------- */
        /* 8. Utility: Hiding Specific Elements */
        /* ---------------------------------- */
        .problem-buttons img,
        .arrow-svg,
        .box-e.tooltip,
        .three-boxes.box-d svg,
        .horizontal_navbar_dsa_article {
            display: none;
        }

        /* ---------------------------------- */
        /* 9. Responsive Adjustments */
        /* ---------------------------------- */

        @media (min-width: 769px) {
            .container {
                max-width: 960px;
                margin: var(--spacing-lg) auto; /* 20px auto */
            }
        }

        @media (max-width: 768px) {
            .container {
                margin: 0;
                padding: var(--spacing-sm); /* 10px */
            }

            h1 {
                font-size: 2em;
            }

            .code-tabs {
                flex-wrap: wrap;
            }

            /* Reduce padding on mobile for details sections */
            details> :not(summary) {
                padding-left: 10px;
                padding-right: 10px;
            }

            .common-drops,
            .atricle_example_content {
                padding: 10px 10px 0;
            }

            .atricle_example_content {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
<div class="container">
<header>
<h1>Maximum Xor Queries | Trie</h1>
</header>
<article>
<p><strong>Problem Statement: </strong>  Given an array of non-negative integers and an array of queries where each query is a pair of two non-negative integers ie. [Xi, Ai]</p>
<p>The answer to the ith query is the maximum bitwise XOR value of the Xi with any integer less than or equal to Ai in the array.</p>
<p>Return an array consisting of the results of these queries.
Note: If all integers are greater than ‘Ai’ in array/list ‘ARR’  then the answer to this with the query will be -1.</p>
<div id="article_examples">
<details class="article_example_details">
<summary class="article_example_summary">
<span><strong>
                    Examples
                </strong>
</span>
<svg class="arrow-svg opacity-75" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z"></path>
</svg>
</summary>
<div class="atricle_example_content">
<pre class="wp-block-preformatted">
                <span><strong>Example :</strong></span>
                <span><strong>Input:</strong> Given Array: [3, 10, 5, 25, 2, 8], Queries: [(0, 1), (1, 2), (0, 3), (3, 3)] </span>
               
                <span><strong>Output:</strong>[-1, 3, 3, 1]</span>
                
                <span><strong>Explanation: </strong>Result of Max XOR Queries:</span>
                <span>Query (0,1):
                <ol><li>We need to find the maximum XOR value of 0 with any integer less than or equal to 1 in the array.</li><li>The integers in the array less than or equal to 1 are: None.</li><li>Since there are no integers less than or equal to 1 in the array, the answer is -1.</li></ol></span>
                <span>Query (1, 2):
                <ol><li>We need to find the maximum XOR value of 1 with any integer less than or equal to 2 in the array.</li><li>The integers in the array less than or equal to 2 are: 2.</li><li>The XOR value is : 1 XOR 2 = 3.</li><li>The maximum XOR value is 3.</li></ol></span>
                <span>Query (0, 3):
                <ol><li>We need to find the maximum XOR value of 0 with any integer less than or equal to 3 in the array.</li><li>The integers in the array less than or equal to 3 are: 3, 2.</li><li>The XOR values are: 0 XOR 3 = 3, 0 XOR 2 = 2</li><li>The maximum XOR value is 3.</li></ol></span>
                <span>Query (3, 3):
                <ol><li>We need to find the maximum XOR value of 3 with any integer less than or equal to 3 in the array.</li><li>The integers in the array less than or equal to 3 are: 3, 2.</li><li>The XOR values are: 3 XOR 3 = 0, 3 XOR 2 = 1</li><li>The maximum XOR value is 1.</li></ol></span>
                <span>Therefore, the output for the given example is [-1, 3, 3, 1].</span>

                                      
                <span><strong>Example 2:</strong></span>
                <span><strong>Input:</strong> Given Array: [4, 6, 7, 10, 12], Queries: 1 5 2 10 5 3 0 7</span>
               
                <span><strong>Output:</strong>[7, 14, -1, 7]</span>
                     
                <span><strong>Explanation: </strong> Result of Max XOR Queries:</span>
                <span>Query (1, 5):
                <ol><li>We need to find the maximum XOR value of 1 with any integer less than or equal to 5 in the array.</li><li>The integers in the array less than or equal to 5 are 4.</li><li>The XOR values are: 1 XOR 4 = 5</li><li>The maximum XOR value is 5</li></ol></span>
                <span>Query (2, 10):
                <ol><li>We need to find the maximum XOR value of 2 with any integer less than or equal to 10 in the array.</li><li>The integers in the array less than or equal to 10 are 4, 6, 7, 10.</li><li>The XOR values are: 2 XOR 4 = 6, 2 XOR 6 = 4, 2 XOR 7 = 5, 2 XOR 10 = 8</li><li>The maximum XOR value is 8.</li></ol></span>	
                <span>Query (5, 3):
                <ol><li>We need to find the maximum XOR value of 5 with any integer less than or equal to 3 in the array.</li><li>There are no integers in the array less than or equal to 3.</li><li>Hence the answer is -1.</li></ol></span>

                <span>Query (0, 7):
                <ol><li>We need to find the maximum XOR value of 0 with any integer less than or equal to 7 in the array.</li><li>The integers in the array less than or equal to 7 are 4, 6, 7.</li><li>The XOR values are: 0 XOR 4 = 4, 0 XOR 6 = 6, 0 XOR 7 = 7</li></ol></span>
                <span>The maximum XOR value is 7.</span>						
					
            </pre>
</div>
</details>
</div>
<!-- This is Practice Section
<div class="practice">
    <span><strong>Practice: </strong></span>
    <div class="problem-buttons">

        
        <a href="https://www.codingninjas.com/studio/problems/check-armstrong_589?utm_source=striver&utm_medium=website&utm_campaign=a_zcoursetuf" target="_blank" rel="noopener">
            <span>Solve Problem</span>
            <img src="https://takeuforward-content-images.s3.ap-south-1.amazonaws.com/content/Group-11-5-pFOq-8ga"
                alt="code-studio">
        </a>
    </div>
    
</div>-->
<p class="new-disclaimer"><strong><em>Disclaimer</em></strong>: <em>Don’t jump directly to the solution, try it out
        yourself first. </em></p>
<div id="brute-force-approach">
<details>
<summary class="main-summary">
<span>
                Optimal Approach 
            </span>
<svg class="arrow-svg opacity-75" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z">
</path>
</svg>
</summary>
<div class="common-drops">
<details class="secondary-details" open="">
<summary class="secondary-summary">
<span>
                        Algorithm / Intuition
                    </span>
<svg class="arrow-svg opacity-75" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z">
</path>
</svg>
</summary>
<div class="approach-algorithm">
<!-- Insert Algorithm / Intuition of Brute Force Apporach Here -->
<p>This problem can be efficiently solved using a Trie where each node will represent a bit and paths from the root to the leaves will represent binary numbers.</p>
<p>The XOR operation between two bits results in 1 if the bits are different and 0 if they are the same. To maximise the XOR value between two numbers, we should aim to have as many different bits as possible. This means that for each bit of the number in question, we should try to find the opposite bit in the Trie to maximise the result.</p>
<p>Instead of inserting all numbers into the Trie at once, we can insert numbers incrementally and only up to the value required by the current query. This reduces unnecessary operations.</p>
<h4>Algorithm </h4>
<p><strong>Step 1:</strong>Create a Trie Node Structure. This structure represents a node in the Trie.
                    <ol><li>It contains an array (‘links’) to store links to child nodes (0 and 1).</li><li>It also contains methods for inserting numbers into the Trie and finding the maximum XOR value achievable with a given number.</li></ol></p>
<figure class="wp-block-image size-full is-resized"><img alt="" class="wp-image-8107" height="286" src="assets/a048ff60684587bb5768e89a48bbd19a" width="439"/></figure>
<p>Read more about this Implementation here: <a href="https://takeuforward.org/data-structure/maximum-xor-of-two-numbers-in-an-array/">Maximum XOR of Two Numbers in an Array</a></p>
<p><strong>Step 2: </strong>
                   	Initialise a vector to store the result of queries. Sort the array of numbers and queries based on their end points. 
                   	<ol><li>We sort the queries based on their end point so that we insert numbers into the Trie only up to the point where it is necessary for answering the current query.</li><li>This optimisation reduces the number of unnecessary Trie operations of insertion again and again.</li></ol></p>
<p><strong>Step 3:</strong>  Iterate through the array of numbers and queries and for each query:
                   	<ol><li>Insert numbers into the Tree until the current query’s endpoint then find the maximum XOR value for the query range using the Trie.</li></ol></p>
<p><strong>Step 4: </strong>
                   	Return the result of all queries..</p>
</div>
</details>
<details class="code-section secondary-details">
<summary class="secondary-summary">
<span>
                        Code
                    </span>
<svg class="arrow-svg opacity-75" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z">
</path>
</svg>
</summary>
<div class="code-tabs">
<button class="code-tab dsa_article_code_active" data-lang="cpp">C++</button>
<button class="code-tab" data-lang="java">Java</button>
<button class="code-tab" data-lang="python">Python</button>
<button class="code-tab" data-lang="javascript">JavaScript</button>
<svg class="copy-btn" fill="none" height="20" viewbox="0 0 17 20" width="17" xmlns="http://www.w3.org/2000/svg">
<path d="M2 20C1.45 20 0.979002 19.804 0.587002 19.412C0.195002 19.02 -0.000664969 18.5493 1.69779e-06 18V4H2V18H13V20H2ZM6 16C5.45 16 4.979 15.804 4.587 15.412C4.195 15.02 3.99934 14.5493 4 14V2C4 1.45 4.196 0.979002 4.588 0.587002C4.98 0.195002 5.45067 -0.000664969 6 1.69779e-06H15C15.55 1.69779e-06 16.021 0.196002 16.413 0.588002C16.805 0.980002 17.0007 1.45067 17 2V14C17 14.55 16.804 15.021 16.412 15.413C16.02 15.805 15.5493 16.0007 15 16H6ZM6 14H15V2H6V14Z">
</path>
</svg>
</div>
<div class="code-content">
<div class="code-block dsa_article_code_active" data-lang="cpp">
<pre class="wp-block-code">
                            <code class="language-cpp" lang="cpp">
#include&lt;bits/stdc++.h&gt;
using namespace std;

// Define a node structure for a trie,
// which contains links to child nodes.
struct Node {
    // Array to hold links
    // to child nodes (0 and 1)
    Node *links[2]; 

    // Function to check if a child node
    // exists at a given index (0 or 1)
    bool containsKey(int ind) {
        return (links[ind] != NULL); 
    }

    // Function to get the child
    // node at a given index (0 or 1)
    Node* get(int ind) {
        return links[ind]; 
    }

    // Function to set the child
    // node at a given index (0 or 1)
    void put(int ind, Node* node) {
        links[ind] = node; 
    }
}; 

// Class definition for
// Trie data structure
class Trie {
private: 
    // Pointer to the root
    // node of the trie
    Node* root; 

public:
    // Constructor to initialize the
    // trie with an empty root node
    Trie() {
        root = new Node(); 
    }
    
public:
    // Function to insert a
    // number into the trie
    void insert(int num) {
        // Start traversal
        // from the root node
        Node* node = root; 
        
        // Traverse each bit of the number
        // from the most significant bit
        // to the least significant bit
        for(int i = 31; i &gt;= 0; i--) {
            // Extract the i-th
            // bit of the number
            int bit = (num &gt;&gt; i) &amp; 1; 
            
            // If the current node doesn't
            // have a child node at the
            // current bit, create one
            if(!node-&gt;containsKey(bit)) {
                node-&gt;put(bit, new Node()); 
            }
            
            // Move to the child node
            // corresponding to the current bit
            node = node-&gt;get(bit); 
        }
    }

public:
    // Function to find the maximum XOR
    // value achievable with a given number
    int findMax(int num) {
        // Start traversal from the root node
        Node* node = root; 
        
        // Initialize the maximum XOR value
        int maxNum = 0; 
        
        // Traverse each bit of the number
        // from the most significant bit to
        // the least significant bit
        for(int i = 31; i &gt;= 0; i--) {
            
             // Extract the i-th
             // bit of the number
            int bit = (num &gt;&gt; i) &amp; 1;
            
            // If there exists a different bit
            // in the trie at the current position,
            // choose it to maximize XOR
            if(node-&gt;containsKey(!bit)) {
                
                 // Set the corresponding
                 // bit in the result
                maxNum = maxNum | (1 &lt;&lt; i);
                // Move to the child node
                // with the different bit
                node = node-&gt;get(!bit); 
            }
            else {
                
                // Move to the child node
                // with the same bit
                node = node-&gt;get(bit); 
            }
        }
        
        // Return the maximum XOR value
        return maxNum; 
    }
};

// Function to perform offline
// maximum XOR queries
vector&lt;int&gt; maxXorQueries(vector&lt;int&gt; &amp;arr, vector&lt;vector&lt;int&gt;&gt; &amp;queries){
    
    // Initialize vector to
    // store results of queries
    vector&lt;int&gt; ans(queries.size(), 0); 
    
     // Vector to store offline queries
    vector&lt;pair&lt;int, pair&lt;int,int&gt;&gt;&gt; offlineQueries;
    // Sort the array of numbers
    sort(arr.begin(), arr.end()); 
    
    int index = 0;
    
    // Convert queries to offline
    // queries and store them in a vector
    for(auto &amp;it: queries) {
        offlineQueries.push_back({it[1],{it[0], index++}}); 
    }
    
    // Sort offline queries
    // based on their end points
    sort(offlineQueries.begin(), offlineQueries.end());
    
    // Pointer to iterate through
    // the array of numbers
    int i = 0; 
    
    // Number of elements in the array
    int n = arr.size(); 
    
    // Create an instance of
    // the Trie data structure
    Trie trie; 
    
    // Process each offline query
    for(auto &amp;it : offlineQueries) {
        // Insert numbers into the trie
        // until the current query's end point
        while(i &lt; n &amp;&amp; arr[i] &lt;= it.first) {
            trie.insert(arr[i]); 
            i++; 
        }
        
        // If there are numbers inserted
        // into the trie, find the maximum
        // XOR value for the query range
        if(i != 0) 
            ans[it.second.second] = trie.findMax(it.second.first); 
        else 
            // If no numbers inserted,
            // set result to -1
            ans[it.second.second] = -1; 
    }
    // Return the results
    // of all queries
    return ans; 
}


int main() {
    vector&lt;int&gt; arr = {3, 10, 5, 25, 2, 8}; 
    cout &lt;&lt; "Given Array: ";
    for(int i =0; i&lt; arr.size(); i++){
        cout &lt;&lt; arr[i] &lt;&lt; " ";
    }
    cout &lt;&lt; endl;
    vector&lt;vector&lt;int&gt;&gt; queries = {{0, 1}, {1, 2}, {0, 3}, {3, 3}};
    
    cout &lt;&lt; "Queries: ";
    for(auto query: queries){
       cout &lt;&lt; query[0] &lt;&lt; " " &lt;&lt; query[1] &lt;&lt; ", ";
    }
    cout &lt;&lt; endl;
    
    vector&lt;int&gt; result = maxXorQueries(arr, queries);

    cout &lt;&lt; "Result of Max XOR Queries:" &lt;&lt; endl;
    for (int i = 0; i &lt; result.size(); ++i) {
        cout &lt;&lt; "Query " &lt;&lt; i+1 &lt;&lt; ": " &lt;&lt; result[i] &lt;&lt; endl;
    }

    return 0;
}

                            </code>
                        </pre>
</div>
<div class="code-block" data-lang="java">
<pre class="wp-block-code">
                            <code class="language-java" lang="java">
import java.util.*;

// Define a node structure for a trie,
// which contains links to child nodes.
class Node {
    // Array to hold links
    // to child nodes (0 and 1)
    Node[] links;

    // Constructor to initialize
    // the array of links
    Node() {
        links = new Node[2];
    }

    // Function to check if a child node
    // exists at a given index (0 or 1)
    boolean containsKey(int ind) {
        return (links[ind] != null);
    }

    // Function to get the child
    // node at a given index (0 or 1)
    Node get(int ind) {
        return links[ind];
    }

    // Function to set the child
    // node at a given index (0 or 1)
    void put(int ind, Node node) {
        links[ind] = node;
    }
}

// Class definition for
// Trie data structure
class Trie {
    // Pointer to the root
    // node of the trie
    Node root;

    // Constructor to initialize the
    // trie with an empty root node
    Trie() {
        root = new Node();
    }

    // Function to insert a
    // number into the trie
    void insert(int num) {
        // Start traversal
        // from the root node
        Node node = root;

        // Traverse each bit of the number
        // from the most significant bit
        // to the least significant bit
        for (int i = 31; i &gt;= 0; i--) {
            // Extract the i-th
            // bit of the number
            int bit = (num &gt;&gt; i) &amp; 1;

            // If the current node doesn't
            // have a child node at the
            // current bit, create one
            if (!node.containsKey(bit)) {
                node.put(bit, new Node());
            }

            // Move to the child node
            // corresponding to the current bit
            node = node.get(bit);
        }
    }

    // Function to find the maximum XOR
    // value achievable with a given number
    int findMax(int num) {
        // Start traversal from the root node
        Node node = root;

        // Initialize the maximum XOR value
        int maxNum = 0;

        // Traverse each bit of the number
        // from the most significant bit to
        // the least significant bit
        for (int i = 31; i &gt;= 0; i--) {

            // Extract the i-th
            // bit of the number
            int bit = (num &gt;&gt; i) &amp; 1;

            // If there exists a different bit
            // in the trie at the current position,
            // choose it to maximize XOR
            if (node.containsKey(1 - bit)) {

                // Set the corresponding
                // bit in the result
                maxNum = maxNum | (1 &lt;&lt; i);
                // Move to the child node
                // with the different bit
                node = node.get(1 - bit);
            } else {

                // Move to the child node
                // with the same bit
                node = node.get(bit);
            }
        }

        // Return the maximum XOR value
        return maxNum;
    }
}

public class Main {
    // Function to perform offline
    // maximum XOR queries
    static int[] maxXorQueries(int[] arr, int[][] queries) {

        // Initialize array to
        // store results of queries
        int[] ans = new int[queries.length];

        // Vector to store offline queries
        ArrayList&lt;Pair&lt;Integer, Pair&lt;Integer, Integer&gt;&gt;&gt; offlineQueries = new ArrayList&lt;&gt;();
        // Sort the array of numbers
        Arrays.sort(arr);

        int index = 0;

        // Convert queries to offline
        // queries and store them in a vector
        for (int[] it : queries) {
            offlineQueries.add(new Pair&lt;&gt;(it[1], new Pair&lt;&gt;(it[0], index++)));
        }

        // Sort offline queries
        // based on their end points
        Collections.sort(offlineQueries);

        // Pointer to iterate through
        // the array of numbers
        int i = 0;

        // Number of elements in the array
        int n = arr.length;

        // Create an instance of
        // the Trie data structure
        Trie trie = new Trie();

        // Process each offline query
        for (Pair&lt;Integer, Pair&lt;Integer, Integer&gt;&gt; it : offlineQueries) {
            // Insert numbers into the trie
            // until the current query's end point
            while (i &lt; n &amp;&amp; arr[i] &lt;= it.first) {
                trie.insert(arr[i]);
                i++;
            }

            // If there are numbers inserted
            // into the trie, find the maximum
            // XOR value for the query range
            if (i != 0)
                ans[it.second.second] = trie.findMax(it.second.first);
            else
                // If no numbers inserted,
                // set result to -1
                ans[it.second.second] = -1;
        }
        // Return the results
        // of all queries
        return ans;
    }

    public static void main(String[] args) {
        int[] arr = {3, 10, 5, 25, 2, 8};
        System.out.print("Given Array: ");
        for (int i = 0; i &lt; arr.length; i++) {
            System.out.print(arr[i] + " ");
        }
        System.out.println();

        int[][] queries = {{0, 1}, {1, 2}, {0, 3}, {3, 3}};

        System.out.print("Queries: ");
        for (int[] query : queries) {
            System.out.print(query[0] + " " + query[1] + ", ");
        }
        System.out.println();

        int[] result = maxXorQueries(arr, queries);

        System.out.println("Result of Max XOR Queries:");
        for (int i = 0; i &lt; result.length; ++i) {
            System.out.println("Query " + (i + 1) + ": " + result[i]);
        }
    }
}
                            </code>
                        </pre>
</div>
<div class="code-block" data-lang="python">
<pre class="wp-block-code">
                            <code class="language-python" lang="python">
class Node:
    def __init__(self):
        # Array to hold links
        # to child nodes (0 and 1)
        self.links = [None, None]

    # Function to check if a child node
    # exists at a given index (0 or 1)
    def containsKey(self, ind):
        return self.links[ind] is not None

    # Function to get the child
    # node at a given index (0 or 1)
    def get(self, ind):
        return self.links[ind]

    # Function to set the child
    # node at a given index (0 or 1)
    def put(self, ind, node):
        self.links[ind] = node


class Trie:
    def __init__(self):
        # Pointer to the root
        # node of the trie
        self.root = Node()

    # Function to insert a
    # number into the trie
    def insert(self, num):
        # Start traversal
        # from the root node
        node = self.root

        # Traverse each bit of the number
        # from the most significant bit
        # to the least significant bit
        for i in range(31, -1, -1):
            # Extract the i-th
            # bit of the number
            bit = (num &gt;&gt; i) &amp; 1

            # If the current node doesn't
            # have a child node at the
            # current bit, create one
            if not node.containsKey(bit):
                node.put(bit, Node())

            # Move to the child node
            # corresponding to the current bit
            node = node.get(bit)

    # Function to find the maximum XOR
    # value achievable with a given number
    def findMax(self, num):
        # Start traversal from the root node
        node = self.root

        # Initialize the maximum XOR value
        maxNum = 0

        # Traverse each bit of the number
        # from the most significant bit to
        # the least significant bit
        for i in range(31, -1, -1):
            # Extract the i-th
            # bit of the number
            bit = (num &gt;&gt; i) &amp; 1

            # If there exists a different bit
            # in the trie at the current position,
            # choose it to maximize XOR
            if node.containsKey(not bit):
                # Set the corresponding
                # bit in the result
                maxNum |= (1 &lt;&lt; i)
                # Move to the child node
                # with the different bit
                node = node.get(not bit)
            else:
                # Move to the child node
                # with the same bit
                node = node.get(bit)

        # Return the maximum XOR value
        return maxNum


# Function to perform offline
# maximum XOR queries
def maxXorQueries(arr, queries):
    # Initialize list to
    # store results of queries
    ans = [0] * len(queries)

    # Vector to store offline queries
    offlineQueries = []

    # Sort the array of numbers
    arr.sort()

    # Convert queries to offline
    # queries and store them in a list
    index = 0
    for query in queries:
        offlineQueries.append((query[1], (query[0], index)))
        index += 1

    # Sort offline queries
    # based on their end points
    offlineQueries.sort()

    # Pointer to iterate through
    # the array of numbers
    i = 0

    # Number of elements in the array
    n = len(arr)

    # Create an instance of
    # the Trie data structure
    trie = Trie()

    # Process each offline query
    for end, (start, queryIndex) in offlineQueries:
        # Insert numbers into the trie
        # until the current query's end point
        while i &lt; n and arr[i] &lt;= end:
            trie.insert(arr[i])
            i += 1

        # If there are numbers inserted
        # into the trie, find the maximum
        # XOR value for the query range
        if i != 0:
            ans[queryIndex] = trie.findMax(start)
        else:
            # If no numbers inserted,
            # set result to -1
            ans[queryIndex] = -1

    # Return the results
    # of all queries
    return ans


if __name__ == "__main__":
    arr = [3, 10, 5, 25, 2, 8]
    print("Given Array:", arr)
    queries = [[0, 1], [1, 2], [0, 3], [3, 3]]
    print("Queries:", queries)

    result = maxXorQueries(arr, queries)

    print("Result of Max XOR Queries:")
    for i, res in enumerate(result):
        print(f"Query {i+1}: {res}")

                           </code>
                        </pre>
</div>
<div class="code-block" data-lang="javascript">
<pre class="wp-block-code">
                            <code class="language-javascript" lang="javascript">
// Define a node structure for a trie,
// which contains links to child nodes.
class Node {
    constructor() {
        // Array to hold links
        // to child nodes (0 and 1)
        this.links = [null, null];
    }

    // Function to check if a child node
    // exists at a given index (0 or 1)
    containsKey(ind) {
        return this.links[ind] !== null;
    }

    // Function to get the child
    // node at a given index (0 or 1)
    get(ind) {
        return this.links[ind];
    }

    // Function to set the child
    // node at a given index (0 or 1)
    put(ind, node) {
        this.links[ind] = node;
    }
}

// Class definition for
// Trie data structure
class Trie {
    constructor() {
        // Pointer to the root
        // node of the trie
        this.root = new Node();
    }

    // Function to insert a
    // number into the trie
    insert(num) {
        // Start traversal
        // from the root node
        let node = this.root;

        // Traverse each bit of the number
        // from the most significant bit
        // to the least significant bit
        for (let i = 31; i &gt;= 0; i--) {
            // Extract the i-th
            // bit of the number
            const bit = (num &gt;&gt; i) &amp; 1;

            // If the current node doesn't
            // have a child node at the
            // current bit, create one
            if (!node.containsKey(bit)) {
                node.put(bit, new Node());
            }

            // Move to the child node
            // corresponding to the current bit
            node = node.get(bit);
        }
    }

    // Function to find the maximum XOR
    // value achievable with a given number
    findMax(num) {
        // Start traversal from the root node
        let node = this.root;

        // Initialize the maximum XOR value
        let maxNum = 0;

        // Traverse each bit of the number
        // from the most significant bit to
        // the least significant bit
        for (let i = 31; i &gt;= 0; i--) {

            // Extract the i-th
            // bit of the number
            const bit = (num &gt;&gt; i) &amp; 1;

            // If there exists a different bit
            // in the trie at the current position,
            // choose it to maximize XOR
            if (node.containsKey(!bit)) {

                // Set the corresponding
                // bit in the result
                maxNum |= (1 &lt;&lt; i);
                // Move to the child node
                // with the different bit
                node = node.get(!bit);
            } else {

                // Move to the child node
                // with the same bit
                node = node.get(bit);
            }
        }

        // Return the maximum XOR value
        return maxNum;
    }
}

// Function to perform offline
// maximum XOR queries
function maxXorQueries(arr, queries) {

    // Initialize vector to
    // store results of queries
    const ans = new Array(queries.length).fill(0);

    // Vector to store offline queries
    const offlineQueries = [];

    // Sort the array of numbers
    arr.sort((a, b) =&gt; a - b);

    let index = 0;

    // Convert queries to offline
    // queries and store them in a vector
    for (const it of queries) {
        offlineQueries.push([it[1], [it[0], index++]]);
    }

    // Sort offline queries
    // based on their end points
    offlineQueries.sort((a, b) =&gt; a[0] - b[0]);

    // Pointer to iterate through
    // the array of numbers
    let i = 0;

    // Number of elements in the array
    const n = arr.length;

    // Create an instance of
    // the Trie data structure
    const trie = new Trie();

    // Process each offline query
    for (const it of offlineQueries) {
        // Insert numbers into the trie
        // until the current query's end point
        while (i &lt; n &amp;&amp; arr[i] &lt;= it[0]) {
            trie.insert(arr[i]);
            i++;
        }

        // If there are numbers inserted
        // into the trie, find the maximum
        // XOR value for the query range
        if (i !== 0)
            ans[it[1][1]] = trie.findMax(it[1][0]);
        else
            // If no numbers inserted,
            // set result to -1
            ans[it[1][1]] = -1;
    }
    // Return the results
    // of all queries
    return ans;
}

const arr = [3, 10, 5, 25, 2, 8];
console.log("Given Array: " + arr.join(" "));
const queries = [[0, 1], [1, 2], [0, 3], [3, 3]];

console.log("Queries: " + queries.map(query =&gt; query.join(" ")).join(", "));

const result = maxXorQueries(arr, queries);

console.log("Result of Max XOR Queries:");
result.forEach((value, index) =&gt; {
    console.log(`Query ${index+1}: ${value}`);
});

                            </code>
                        </pre>
</div>
<span><strong>Output:</strong> Given Array: 3 10 5 25 2 8 </span>
<span>Queries: 0 1, 1 2, 0 3, 3 3</span>
<span>Result of Max XOR Queries: Query 1: -1, Query 2: 3, Query 3: 3, Query 4: 1</span>
</div>
</details>
<details class="secondary-details">
<summary class="secondary-summary">
<span>
                        Complexity Analysis
                    </span>
<svg class="arrow-svg opacity-75" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z">
</path>
</svg>
</summary>
<p>
<!-- Insert Time and Space Complexity  Here -->
<p><strong>Time Complexity: O(32*N + Q(logQ) + 32*Q)</strong>
                     where N is the size of the input array and Q is the number of queries.
                    <ol><li>For each number in the input array, we traverse its bits from left to right (total of 32 bits). Since there are ‘N’ numbers in the array, the total time complexity is O(32*N).</li><li>Sorting the offline queries based on their endpoints requires O(Q log(Q) time using the inbuilt library for sorting.</li><li>For each query, we traverse the bits of the numbers in the Trie to find the maximum XOR value. Since each number has 32 bits and there are Q Queries, the total time complexity for processing is O(32*Q).</li></ol></p>
<p><strong>Space Complexity: O(32*N + Q)</strong>   
					where N is the size of the input array and Q is the number of queries.
					<ol><li>The space complexity of the Trie depends on the number of bits required to represent the numbers in the input array. Each number is represented as a sequence of 32 bits hence the space required by the Trie is O(32*N).</li><li>We store the queries and sort them based on the endpoint of each query. This requires an additional space complexity of O(Q).</li></ol></p>
</p></details>
</div>
</details>
</div>
<!-- This is Video Explination Drop-Down -->
<div class="dsa_article_youtube_video" id="dsa_article_video_explanation">
<details>
<summary class="main-summary">
<span>
                Video Explanation
            </span>
<svg class="arrow-svg opacity-75" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z"></path>
</svg>
</summary>
<div class="yt-video-wrapper">
<!-- Insert iframe embed Link of Youtube Video-->
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" frameborder="0" height="315" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Q8LhG9Pi5KM?si=FzgoR2bPsd7Cf8BB" title="YouTube video player" width="560"></iframe>
</div>
</details>
</div>
<blockquote class="wp-block-quote">
    Special thanks to <strong><a href="https://www.linkedin.com/in/gauri-tomar-005048268">Gauri Tomar</a></strong> for contributing to this article on takeUforward. If you also wish to share your knowledge with the takeUforward fam,<strong><a href="https://takeuforward.org/interviews/paid-work-from-home-internship-at-takeuforward/"> please check out this article</a></strong>
</blockquote>
<script>

    const codeSections = document.querySelectorAll('.code-section');

    // Get last selected language from localStorage or set default value
    let lastSelectedLanguage = localStorage.getItem('lastSelectedLanguage') || 'cpp';

    codeSections.forEach((section, sectionIndex) => {
        const codeTabs = section.querySelectorAll('.code-tab');
        const codeBlocks = section.querySelectorAll('.code-block');
        const copyBtn = section.querySelector('.copy-btn');

        codeTabs.forEach((tab) => {
            tab.addEventListener('click', () => {
                codeTabs.forEach((t) => {
                    t.classList.remove('dsa_article_code_active');
                });
                tab.classList.add('dsa_article_code_active');

                const lang = tab.dataset.lang;
                const activeBlock = section.querySelector(`.code-block[data-lang="${lang}"]`);
                codeBlocks.forEach((block) => {
                    if (block === activeBlock) {
                        block.classList.add('dsa_article_code_active');
                    } else {
                        block.classList.remove('dsa_article_code_active');
                    }
                });

                // Update last selected language for all sections and store in localStorage
                lastSelectedLanguage = lang;
                localStorage.setItem('lastSelectedLanguage', lang);
                codeSections.forEach((otherSection, otherIndex) => {
                    if (otherIndex !== sectionIndex) {
                        const otherTabs = otherSection.querySelectorAll('.code-tab');
                        otherTabs.forEach((otherTab) => {
                            if (otherTab.dataset.lang === lang) {
                                otherTab.classList.add('dsa_article_code_active');
                            } else {
                                otherTab.classList.remove('dsa_article_code_active');
                            }
                        });
                        const otherActiveBlock = otherSection.querySelector(`.code-block[data-lang="${lang}"]`);
                        const otherCodeBlocks = otherSection.querySelectorAll('.code-block');
                        otherCodeBlocks.forEach((block) => {
                            if (block === otherActiveBlock) {
                                block.classList.add('dsa_article_code_active');
                            } else {
                                block.classList.remove('dsa_article_code_active');
                            }
                        });
                    }
                });
            });
        });

        // Handle copy button click event
        copyBtn.addEventListener('click', () => {
            const activeBlock = section.querySelector('.code-block.dsa_article_code_active code');
            navigator.clipboard.writeText(activeBlock.innerText);
            copyBtn.classList.add('dsa_article_code_active');
            setTimeout(() => {
                copyBtn.classList.remove('dsa_article_code_active');
            }, 1000);
        });
    });

    // Set initial state of the tabs
    codeSections.forEach((section) => {
        const codeTabs = section.querySelectorAll('.code-tab');
        const codeBlocks = section.querySelectorAll('.code-block');

        codeTabs.forEach((tab) => {
            if (tab.dataset.lang === lastSelectedLanguage) {
                tab.classList.add('dsa_article_code_active');
            } else {
                tab.classList.remove('dsa_article_code_active');
            }
        });

        codeBlocks.forEach((block) => {
            if (block.dataset.lang === lastSelectedLanguage) {
                block.classList.add('dsa_article_code_active');
            } else {
                block.classList.remove('dsa_article_code_active');
            }
        });
    });
</script>
<link href="assets/4237ffca7ce6aadb438c457e0a675b12.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
<script src="index.js"></script>
<script>hljs.highlightAll();</script>
</article>
</div>
<script>
        document.addEventListener('DOMContentLoaded', function () {
            // This script fixes the functionality of the code language switcher tabs
            // that are injected from the JSON content. It uses event delegation for efficiency.

            const codeSections = document.querySelectorAll('.code-section');
            let lastSelectedLanguage = localStorage.getItem('lastSelectedLanguage') || 'cpp';

            function updateCodeSection(section, language) {
                const tabs = section.querySelectorAll('.code-tab');
                const blocks = section.querySelectorAll('.code-block');

                tabs.forEach(tab => {
                    tab.classList.toggle('dsa_article_code_active', tab.dataset.lang === language);
                });

                blocks.forEach(block => {
                    block.classList.toggle('dsa_article_code_active', block.dataset.lang === language);
                });
            }

            function updateAllSections(language) {
                lastSelectedLanguage = language;
                localStorage.setItem('lastSelectedLanguage', language);
                codeSections.forEach(section => {
                    updateCodeSection(section, language);
                });
            }

            codeSections.forEach(section => {
                const tabsContainer = section.querySelector('.code-tabs');
                if (!tabsContainer) return;

                // Use event delegation on the container to handle clicks
                tabsContainer.addEventListener('click', (event) => {
                    const tabTarget = event.target.closest('.code-tab');
                    const copyTarget = event.target.closest('.copy-btn');

                    // Handle tab clicks
                    if (tabTarget) {
                        const lang = tabTarget.dataset.lang;
                        if (lang) {
                            updateAllSections(lang);
                        }
                    }

                    // Handle copy button clicks
                    if (copyTarget) {
                        const activeBlock = section.querySelector('.code-block.dsa_article_code_active code');
                        if (activeBlock && activeBlock.innerText) {
                            // Use the Clipboard API for modern browsers
                            navigator.clipboard.writeText(activeBlock.innerText).then(() => {
                                copyTarget.classList.add('dsa_article_code_active');
                                setTimeout(() => {
                                    copyTarget.classList.remove('dsa_article_code_active');
                                }, 1500);
                            }).catch(err => {
                                console.error('Failed to copy text: ', err);
                            });
                        }
                    }
                });
            });

            // Set the initial state for all sections on page load
            if (codeSections.length > 0) {
                updateAllSections(lastSelectedLanguage);
            }
        });
    </script>
</body>
</html>
