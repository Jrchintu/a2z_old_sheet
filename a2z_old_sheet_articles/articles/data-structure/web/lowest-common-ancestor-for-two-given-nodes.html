<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Lowest Common Ancestor for two given Nodes</title>
<style>
        /* A clean, modern, and responsive base style for the articles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            /* line-height: 1.7; */
            color: #333;
            background-color: #fdfdfd;
            margin: 5px;
            padding: 0;
        }

        /* Main container for the article content */
        .container {
            /* margin: 5px; */
            /* Replaced '20px auto' to add margin on all sides */
            padding: 10px;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* Main article title */
        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 0.5em;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 0.5em;
            text-align: center;
        }

        /* Make images responsive and centered */
        img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            display: block;
            /* To allow auto margins to work */
            margin: 1em auto;
            /* Adds some vertical spacing and centers horizontally */
        }

        /* Center figures which often wrap images */
        figure {
            text-align: center;
            margin: 1.5em 0;
        }

        /* Center and style YouTube video wrapper for responsiveness */
        .yt-video-wrapper {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding-top: 56.25%;
            /* 16:9 Aspect Ratio */
            margin: 1.5em auto;
            /* Center block element */
            border-radius: 8px;
        }

        .yt-video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Basic code block styling */
        pre {
            background-color: #2d2d2d;
            /* A common dark background for code */
            color: #f8f8f2;
            padding: 10px;
            margin: 0px;
            border-radius: 5px;
            overflow-x: auto;
            /* Allow horizontal scrolling for long code lines */
            font-family: "Fira Code", "Consolas", "Monaco", monospace;
            font-size: 0.9em;
        }

        code {
            font-family: "Fira Code", "Consolas", "Monaco", monospace;
        }

        /* Improve styling for links */
        a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.2s ease-in-out;
        }

        a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        /* --- Code Section Tabs Styling --- */
        .code-tabs {
            display: flex;
            border-bottom: 1px solid #e7e7e7;
            margin-bottom: 1em;
            align-items: center;
        }

        .code-tab {
            padding: 10px 15px;
            cursor: pointer;
            background-color: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1em;
            color: #555;
            transition: all 0.2s ease-in-out;
        }

        .code-tab:hover {
            background-color: #f9f9f9;
            color: #333;
        }

        .code-tab.dsa_article_code_active {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
        }

        .copy-btn {
            margin-left: auto;
            cursor: pointer;
            padding: 10px;
        }

        .copy-btn path {
            fill: #aaa;
            transition: fill 0.2s;
        }

        .copy-btn:hover path {
            fill: #333;
        }

        .copy-btn.dsa_article_code_active path {
            fill: #3498db;
        }

        .code-block {
            display: none;
        }

        .code-block.dsa_article_code_active {
            display: block;
        }

        /* --- End Code Section Tabs Styling --- */

        /* --- Accordion/Dropdown Styling --- */
        details {
            margin-bottom: 1em;
            border: 1px solid #e7e7e7;
            border-radius: 6px;
            overflow: hidden;
            /* Keeps content within rounded corners */
            padding: 0;
            /* Reset any default padding */
        }

        summary {
            list-style: none;
            /* Hide the default marker */
            cursor: pointer;
            padding: 15px 20px;
            background-color: #f9f9f9;
            font-weight: 500;
            color: #2c3e50;
            transition: background-color 0.2s ease-in-out;
        }

        summary::-webkit-details-marker {
            display: none;
            /* Hide default marker for Chrome/Safari */
        }

        summary:hover {
            background-color: #f1f1f1;
        }

        /* Content inside the dropdowns */
        .common-drops,
        .atricle_example_content {
            padding: 10px 10px 0;
            border-bottom: 10px;
            background-color: #fff;
            border-top: 1px solid #e7e7e7;
        }

        /* Full padding for example */
        .atricle_example_content {
            padding: 10px;
        }

        /* Additional padding for details content that doesn't have specific classes */
        details> :not(summary) {
            padding-left: 10px;
            padding-right: 10px;
        }

        .dsa_article_youtube_video .yt-video-wrapper {
            padding-top: 56.25%;
            margin: 0;
            border-radius: 0;
            padding-left: 0;
            padding-right: 0;
        }

        /* Nested dropdown summaries */
        .secondary-summary {
            background-color: #fafafa;
            padding: 12px 20px;
            font-weight: normal;
        }

        .secondary-summary:hover {
            background-color: #f0f0f0;
        }

        /* --- End Accordion/Dropdown Styling --- */

        /* Hide specific UI elements based on user request */
        .problem-buttons img,
        .arrow-svg,
        .box-e.tooltip,
        .three-boxes.box-d svg,
        .horizontal_navbar_dsa_article {
            display: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                /* margin: 5px; */
                padding: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .code-tabs {
                flex-wrap: wrap;
                /* Allow tabs to wrap on small screens */
            }

            /* Reduce padding on mobile for details sections */
            details> :not(summary) {
                padding-left: 10px;
                padding-right: 10px;
            }

            .common-drops,
            .atricle_example_content {
                padding: 10px 10px 0;
            }

            .atricle_example_content {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
<div class="container">
<header>
<h1>Lowest Common Ancestor for two given Nodes</h1>
</header>
<article>
<!-- wp:paragraph -->
<p><strong>Problem Statement:</strong> Given a binary tree, Find the  Lowest Common Ancestor for two given Nodes (x,y).</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Lowest Common Ancestor(LCA): </strong>The lowest common ancestor is defined between two nodes x and y as the lowest node in T that has both x and y as descendants (where we allow a node to be a descendant of itself.</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Examples:</strong></p>
<!-- /wp:paragraph -->
<!-- wp:preformatted -->
<pre class="wp-block-preformatted"><strong>Consider the following Binary Tree</strong>
<img height="185" src="assets/8cec08fd1f2e50dcd217cffc678dc30d" width="207"/>

<strong>Example 1: </strong>

<strong>Input: </strong>x = 4 , y = 5

<strong>Output:</strong> 2 

<strong>Explanation:</strong> All ancestors for 4,5 are 2,1.  But we need Lowest Common ancestor, So we will consider lowest and also common ancestor that is 2

<strong>Example 2:</strong>

<strong>Input:</strong> 
x = 2 , y = 3

<strong>Output:</strong> 1

<strong>Explanation:</strong>  Lowest Common Ancestor for x,y i.e for 2,3 is 1

<strong>Example 3:</strong>

<strong>Input:</strong> 
x= 6 , y = 7

<strong>Output:</strong> 3

<strong>Explanation:</strong>  Lowest Common Ancestor for x,y i.e for 6,7 is 3 </pre>
<!-- /wp:preformatted -->
<!-- wp:paragraph -->
<p><strong>Solution:</strong></p>
<!-- /wp:paragraph -->
<!-- wp:paragraph {"textColor":"vivid-red"} -->
<p class="has-vivid-red-color has-text-color"><strong><em>Disclaimer</em></strong>: <em>Don't jump directly to the solution, try it out yourself first.</em></p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Intuition</strong>:</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>The very first thing we can observe from the question is that we can find the LCA of 2 given nodes from </p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>        i) Left subtree or in</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>       ii)Right subtree, if not in both the subtrees then root will be the  LCA.</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Approach</strong>:</p>
<!-- /wp:paragraph -->
<!-- wp:list {"ordered":true} -->
<ol><li>If root is null or if root is x or if root is y then return root</li><li>Made a recursion call for both</li></ol>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p>i) Left subtree </p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>ii)Right subtree</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>Because we would find LCA in the left or right subtree only.</p>
<!-- /wp:paragraph -->
<!-- wp:list {"ordered":true,"start":3} -->
<ol start="3"><li>If the left subtree recursive call gives a null value that means we haven’t found LCA in the left subtree, which means we found LCA on the right subtree. So we will return right.</li></ol>
<!-- /wp:list -->
<!-- wp:list {"ordered":true,"start":4} -->
<ol start="4"><li>If the right subtree recursive call gives null value, that means we haven’t found LCA on the right subtree, which means we found LCA on the left subtree. So we will return left .</li></ol>
<!-- /wp:list -->
<!-- wp:list {"ordered":true,"start":5} -->
<ol start="5"><li> If both left &amp; right calls give values (not null)  that means the root is the LCA.</li></ol>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p>Let’s take an example and will try to understand the approach more clearly:</p>
<!-- /wp:paragraph -->
<!-- wp:heading {"level":3} -->
<h3>LCA of (x,y) = &gt; (4,5) = ? (from above given example)</h3>
<!-- /wp:heading -->
<!-- wp:list -->
<ul><li>Root is 1 which is not null and x,y is not equal to root, So the 1st statement in approach  will not execute.</li><li>i) Call left subtree, While calling recursively it will find 4 and this call will return 4 to its parent </li></ul>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p><em>Point to Note: At present, the root is 2 ( Look at below recursion tree for better understanding)</em></p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>i) Call the right subtree ( i.e right of 2), While calling recursively it will find 5  and this call will return 5 to its parent.</p>
<!-- /wp:paragraph -->
<!-- wp:list -->
<ul><li>Now the left recursive  call returns value (not null) i.e 4 and also the right recursive call returns value (not null) i.e 5 to its root ( at present root is 2) , and this 2 will return itself to its root i.e to 1 (main root).</li></ul>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p><em>Point to Note: At present, the root is 1 ( Look at below recursion tree for better understanding)</em></p>
<!-- /wp:paragraph -->
<!-- wp:list -->
<ul><li>Now, the left subtree gives a value i.e 2.</li><li>Right recursive call will give null value .because x,y are not present in the right subtree.</li><li>As we know if the right recursive call gives null then we return the answer which we got from the left call, So we will return 2.</li><li> Hence LCA of (4,5) is 2.</li></ul>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p><strong>For a better understanding of the</strong> <strong>above example (LCA OF 4,5) :</strong></p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><img height="259" src="assets/b97377c3620176398993efb682804d0e" width="393"/></p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Code:</strong> </p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>[tabby title= "C++ Code"]</p>
<!-- /wp:paragraph -->
<!-- wp:code -->
<pre class="wp-block-code"><code class="language-cpp" lang="cpp">class Solution {
public:
    TreeNode* lowestCommonAncestor(TreeNode* root, TreeNode* p, TreeNode* q) {
        //base case
        if (root == NULL || root == p || root == q) {
            return root;
        }
        TreeNode* left = lowestCommonAncestor(root-&gt;left, p, q);
        TreeNode* right = lowestCommonAncestor(root-&gt;right, p, q);

        //result
        if(left == NULL) {
            return right;
        }
        else if(right == NULL) {
            return left;
        }
        else { //both left and right are not null, we found our result
            return root;
        }
    }
};</code></pre>
<!-- /wp:code -->
<!-- wp:paragraph -->
<p><strong>Time complexity</strong>: O(N) where n is the number of nodes.</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Space complexity</strong>: O(N), auxiliary space.</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
</article></div>
<div class="code-block" data-lang="java">
<!-- /wp:paragraph -->
<!-- wp:code -->
<pre class="wp-block-code"><code class="language-java" lang="java">class Solution {
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        //base case
        if (root == null || root == p || root == q) {
            return root;
        }
        TreeNode left = lowestCommonAncestor(root.left, p, q);
        TreeNode right = lowestCommonAncestor(root.right, p, q);

        //result
        if(left == null) {
            return right;
        }
        else if(right == null) {
            return left;
        }
        else { //both left and right are not null, we found our result
            return root;
        }
    }
}</code></pre>
<!-- /wp:code -->
<!-- wp:paragraph -->
<p><strong>Time complexity</strong>: O(N) where n is the number of nodes.</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><strong>Space complexity</strong>: O(N), auxiliary space.</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
</div>


<!-- /wp:paragraph -->
<!-- wp:quote -->
<blockquote class="wp-block-quote"><p><em><em>Special thanks to <strong><a href="https://www.linkedin.com/in/sai-bargav-nellepalli-74799b1bb/" rel="noreferrer noopener nofollow" target="_blank">Sai bargav Nellepalli</a></strong> for contributing to this article on takeUforward. If you also wish to share your knowledge with the takeUforward fam, </em><a href="https://takeuforward.org/contribute/help-us-grow-takeuforward/">please check out this articl</a><em>e</em></em></p></blockquote>
<!-- /wp:quote -->


<script>
        document.addEventListener('DOMContentLoaded', function () {
            // This script fixes the functionality of the code language switcher tabs
            // that are injected from the JSON content. It uses event delegation for efficiency.

            const codeSections = document.querySelectorAll('.code-section');
            let lastSelectedLanguage = localStorage.getItem('lastSelectedLanguage') || 'cpp';

            function updateCodeSection(section, language) {
                const tabs = section.querySelectorAll('.code-tab');
                const blocks = section.querySelectorAll('.code-block');

                tabs.forEach(tab => {
                    tab.classList.toggle('dsa_article_code_active', tab.dataset.lang === language);
                });

                blocks.forEach(block => {
                    block.classList.toggle('dsa_article_code_active', block.dataset.lang === language);
                });
            }

            function updateAllSections(language) {
                lastSelectedLanguage = language;
                localStorage.setItem('lastSelectedLanguage', language);
                codeSections.forEach(section => {
                    updateCodeSection(section, language);
                });
            }

            codeSections.forEach(section => {
                const tabsContainer = section.querySelector('.code-tabs');
                if (!tabsContainer) return;

                // Use event delegation on the container to handle clicks
                tabsContainer.addEventListener('click', (event) => {
                    const tabTarget = event.target.closest('.code-tab');
                    const copyTarget = event.target.closest('.copy-btn');

                    // Handle tab clicks
                    if (tabTarget) {
                        const lang = tabTarget.dataset.lang;
                        if (lang) {
                            updateAllSections(lang);
                        }
                    }

                    // Handle copy button clicks
                    if (copyTarget) {
                        const activeBlock = section.querySelector('.code-block.dsa_article_code_active code');
                        if (activeBlock) {
                            // Use the Clipboard API for modern browsers
                            navigator.clipboard.writeText(activeBlock.innerText).then(() => {
                                copyTarget.classList.add('dsa_article_code_active');
                                setTimeout(() => {
                                    copyTarget.classList.remove('dsa_article_code_active');
                                }, 1500);
                            }).catch(err => {
                                console.error('Failed to copy text: ', err);
                            });
                        }
                    }
                });
            });

            // Set the initial state for all sections on page load
            if (codeSections.length > 0) {
                updateAllSections(lastSelectedLanguage);
            }
        });
    </script>
</body>
</html>